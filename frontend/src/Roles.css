/* ====== Theme base ====== */
:root{
  --brand:#5866f2;
  --brand-600:#4a56d6;
  --brand-700:#3c45b8;
  --brand-50:#eef0ff;
  --accent:#22c1dc;
  --ok:#22c55e;
  --muted:#7a7f9a;
  --card:#ffffff;
  --ring:rgba(88,102,242,.25);
}

/* cards suaves */
.card-soft{border:0; border-radius:18px; background:var(--card);
  box-shadow:0 8px 28px rgba(16,24,40,.08);}
.card-soft .card-header{background:transparent; border:0; padding:16px 20px}

/* toolbar con gradient */
.roles-toolbar{
  background:linear-gradient(135deg,var(--brand),var(--accent));
  color:#fff; border-radius:18px; padding:18px;
  box-shadow:0 10px 30px rgba(88,102,242,.25);
}

/* botones pill */
.btn-pill{border-radius:999px; padding:.55rem 1rem; font-weight:600}
.btn-brand{background:var(--brand); border-color:var(--brand); color:#fff}
.btn-brand:hover{background:var(--brand-700); border-color:var(--brand-700)}
.btn-ghost-light{background:rgba(255,255,255,.15); border:0; color:#fff}
.btn-ghost-light:hover{background:rgba(255,255,255,.28)}

/* inputs */
.input-icon .input-group-text{background:#fff; border-right:0; color:var(--muted)}
.input-icon .form-control{border-left:0}
.form-control, .form-select{border-radius:12px}
.form-control:focus{box-shadow:0 0 0 .25rem var(--ring); border-color:var(--brand)}

/* list-group */
.list-group .list-group-item{border:0; border-radius:12px; margin-bottom:10px}
.list-group .list-group-item:hover{box-shadow:0 8px 18px rgba(0,0,0,.05)}
.badge-soft{background:var(--brand-50); color:var(--brand-700); font-weight:700}

/* ====== Alinear chips "bloqueado" en la lista de roles ====== */
.roles-wrap .list-group .list-group-item{
  display:grid;                   /* 2 columnas: nombre + acciones */
  grid-template-columns:1fr auto; /* nombre ocupa todo, acciones a la derecha */
  align-items:center;
}
.roles-wrap .list-group .list-group-item .flex-grow-1{ margin-right:12px; }
.roles-wrap .roles-actions{ justify-self:end; }
.roles-wrap .roles-actions .badge{ white-space:nowrap; } /* evita salto en 'bloqueado' */

/* ====== Item seleccionado ====== */
.selected-role{
  background: linear-gradient(135deg, #4f6bff 0%, #5f7dff 50%, #6f8eff 100%);
  color:#fff !important; border-color:transparent;
  box-shadow:0 10px 20px rgba(79,107,255,.28);
}
.selected-role .badge{background:rgba(255,255,255,.22)!important; color:#fff!important; border:0}

/* Botones sobre item seleccionado */
.list-group .list-group-item.selected-role .btn-outline-primary,
.list-group .list-group-item.selected-role .btn-outline-danger{
  background:#fff; border:none; width:32px; height:32px; padding:0;
  display:inline-flex; align-items:center; justify-content:center;
  box-shadow:0 6px 16px rgba(0,0,0,.12)!important; border-radius:10px;
  --bs-btn-border-color:transparent; --bs-btn-hover-border-color:transparent; --bs-btn-active-border-color:transparent;
}
.list-group .list-group-item.selected-role .btn-outline-primary{ color:#3f5bff!important }
.list-group .list-group-item.selected-role .btn-outline-danger { color:#e03131!important }
.list-group .list-group-item.selected-role .btn-outline-primary:hover{ background:#f0f4ff!important; transform:translateY(-1px) }
.list-group .list-group-item.selected-role .btn-outline-danger:hover { background:#fff0f0!important; transform:translateY(-1px) }

/* === Botones accesibles/deshabilitados === */
.btn:disabled,.btn.disabled{opacity:1!important; cursor:not-allowed!important}
.btn-primary:disabled{background-color:#4f7cff!important; border-color:#4f7cff!important; color:#fff!important}
.btn-outline-secondary:disabled{background-color:#e9ecef!important; border-color:#ddd!important; color:#666!important}

/* Edición inline */
.list-group-item .form-control.form-control-sm{box-shadow:0 0 0 3px rgba(65,105,255,.08); border-radius:10px}

/* ====== COLORES DE ACCIÓN (globales) ====== */
.btn.btn-success{ background:var(--ok)!important; border-color:var(--ok)!important; color:#fff!important; }
.btn.btn-success:hover, .btn.btn-success:focus{ filter:brightness(.95) }
.btn.btn-danger{ background:#ef4444!important; border-color:#ef4444!important; color:#fff!important; }
.btn.btn-danger:hover, .btn.btn-danger:focus{ filter:brightness(.95) }

/* ====== Acciones a la derecha de cada item (para subvista deshabilitados) ====== */
.roles-actions{
  display:inline-flex !important;
  flex-wrap:nowrap;
  align-items:center;
  gap:12px;
}
.roles-actions .btn{
  display:inline-flex !important;
  width:auto !important;
  min-width:110px;
  justify-content:center;
}

/* ===== Modal ===== */
.modal-overlay{
  position:fixed; inset:0; display:flex; align-items:center; justify-content:center;
  background:rgba(16,24,40,.35); -webkit-backdrop-filter:blur(6px); backdrop-filter:blur(6px);
  z-index:2000; animation:fadeIn .12s ease-out;
}
.modal-card{
  width:100%; max-width:420px; background:#fff; border-radius:16px;
  box-shadow:0 20px 60px rgba(16,24,40,.25); padding:18px;
  border:1px solid rgba(53,87,255,.10); transform:translateY(4px) scale(.98);
  animation:popIn .18s ease-out forwards;
}
.modal-header{display:flex; align-items:center; gap:12px; margin-bottom:6px}
.modal-title{margin:0; font-size:18px; color:#122046; font-weight:700}
.modal-icon{width:32px; height:32px; border-radius:10px; display:grid; place-items:center; color:#fff; font-weight:700}
.modal-icon.danger{background:#ef4444} .modal-icon.primary{background:#3557ff} .modal-icon.success{background:#22c55e}
.modal-desc{margin:0 2px 14px; color:#44506a; font-size:14px; line-height:1.45}
.modal-actions{display:flex; gap:10px; justify-content:flex-end}
.btn-ghost{background:#f1f4ff; color:#2f3a67; border:1px solid rgba(53,87,255,.15)}
.btn-ghost:hover{background:#e6ecff}

/* Animaciones */
@keyframes fadeIn{ from{opacity:0} to{opacity:1} }
@keyframes popIn{ to{ transform: translateY(0) scale(1); } }

/* ====== Top Toast ====== */
.u-top-toast{
  position:fixed; top:18px; left:50%; transform:translateX(-50%);
  display:flex; align-items:center; gap:12px;
  background:#334155; color:#fff; padding:12px 16px; border-radius:12px;
  box-shadow:0 10px 30px rgba(0,0,0,.2); font-weight:600;
  z-index:3000; max-width:680px; width:auto;
  animation:u-slide-down .2s ease-out;
}
.u-top-toast__text{ white-space:nowrap; }
.u-top-toast__close{ border:none; background:rgba(255,255,255,.2); color:#fff; border-radius:8px; padding:4px 8px; cursor:pointer; }
@keyframes u-slide-down{ from{ opacity:0; transform:translate(-50%,-10px);} to{opacity:1; transform:translate(-50%,0);} }

/* ====== Bloquear barra de permisos en Superadmin ====== */
.locked-toolbar{ opacity:.6; pointer-events:none; filter:grayscale(.15); }
.locked-toolbar .btn:disabled,
.locked-toolbar .btn.disabled { color:#fff !important; }
.locked-toolbar .btn-outline-secondary:disabled,
.locked-toolbar .btn-outline-secondary.disabled { color:#fff !important; }

/* ================================================================== */
/* ========================  DESKTOP DEFAULT  ======================= */
/* ================================================================== */

/* Barra de acciones (Seleccionar / Quitar / Guardar) — tamaño normal en PC */
.perm-toolbar{
  display:flex;
  align-items:center;
  gap:8px;
  flex-wrap:nowrap;                /* no envuelve en escritorio */
}
.perm-toolbar .btn{
  min-width:auto;
  font-size:inherit;
  padding:.375rem .75rem;
  border-radius:.375rem;
}

/* Crear nuevo rol — una fila en escritorio */
.new-role-row{
  display:flex;
  align-items:center;
  gap:10px;
}
.new-role-row input.form-control{ width:300px !important; }
.new-role-row .btn{ width:auto !important; flex:0 0 auto; }

/* ================================================================== */
/* ===========================  MÓVIL  ============================== */
/* ================================================================== */
@media (max-width:768px){
  /* contenedor y paddings */
  .roles-wrap{ padding:0 12px; }
  .roles-wrap .row.g-4{ --bs-gutter-x:12px; --bs-gutter-y:12px; }
  .roles-wrap h2{ font-size:28px; line-height:1.1; }
  .roles-wrap .card .card-body{ padding:14px; }

  /* buscador full width */
  .roles-wrap input.form-control.form-control-sm[placeholder="Buscar…"]{
    max-width:100% !important; width:100%;
  }

  /* items táctiles */
  .list-group .list-group-item{
    padding:12px 14px; margin-bottom:10px;
    box-shadow:0 6px 14px rgba(0,0,0,.04);
  }
  .roles-actions{ gap:8px; }
  .roles-actions .btn{ min-width:auto; padding:6px 10px; }

  /* Barra de permisos grande y apilable */
  .perm-toolbar{ flex-wrap:wrap; gap:8px; }
  .perm-toolbar .ms-auto{ display:none; }
  .perm-toolbar .btn{
    min-width:0; font-size:14px; padding:10px 12px; border-radius:12px;
  }
  .perm-toolbar .btn-outline-secondary{ flex:1 1 calc(50% - 8px); }
  .perm-toolbar .btn-primary{ flex:1 1 100%; }

  /* Lista de permisos en una columna + switches cómodos */
  .perm-list > [class*="col-"]{ width:100%; }
  .perm-list .form-check.form-switch{
    display:flex; align-items:center; gap:10px; padding:8px 0; font-size:16px;
  }
  .perm-list .form-check-input{ margin:0 10px 0 0; width:42px; height:24px; }

  /* separaciones */
  .card-body hr.my-3{ margin:12px 0 !important; }
  .perm-list{ margin-bottom:6px; }

  /* Crear nuevo rol: input arriba, botones abajo 50/50 */
  .new-role-row{
    display:flex !important; flex-wrap:wrap; gap:10px; margin-top:8px;
  }
  .new-role-row input.form-control{
    order:0; width:100% !important;    /* ignora width inline */
  }
  .new-role-row .btn{
    order:1; flex:1 1 calc(50% - 5px); width:auto;
  }

  /* toast / modal centrados en pantallas chicas */
  .u-top-toast{ left:12px; right:12px; transform:none; }
  .modal-card{ margin:0 12px; }

  /* pill más discreto */
  .btn-pill{ padding:.5rem .9rem; }
}

/* Pantallas MUY chicas: botones del nuevo rol a 100% */
@media (max-width:380px){
  .new-role-row .btn{ flex-basis:100%; }
}

/* ================================================================== */
/* ========================  DESKTOP COMPACTO  ====================== */
/* ================================================================== */
@media (min-width:992px){
  .perm-toolbar .btn{
    padding:.4rem .9rem;
    font-size:.9rem;
    border-radius:10px;
    flex:0 0 auto;
  }
  .perm-toolbar .btn-outline-secondary{ min-width:150px; }
  .perm-toolbar .btn-primary{ min-width:170px; }
}

/* ===== FIX: botones de la barra en PC (3 compactos en línea) ===== */
@media (min-width: 992px) {
  .perm-toolbar {
    display: flex;
    gap: 8px;
    flex-wrap: nowrap;                 /* no envolver */
  }
  .perm-toolbar .btn {
    flex: 0 0 auto !important;         /* NO crecer */
    width: auto !important;            /* sin ancho completo */
    padding: .45rem .9rem;             /* alto compacto */
    font-size: .95rem;
    border-radius: 10px;
  }
  .perm-toolbar .btn-outline-secondary { min-width: 150px; }
  .perm-toolbar .btn-primary          { min-width: 170px; }
}

/* En caso de que alguna regla anterior los esté haciendo 100%, desactívalo aquí */
.perm-toolbar .btn { flex: 0 0 auto !important; width: auto !important; }

/* ===== Juntar los 3 botones de la barra también en escritorio ===== */
@media (min-width: 992px) {
  .perm-toolbar { gap: 10px; }                   /* separación uniforme */
  .perm-toolbar .ms-auto { display: none !important; }  /* quita el empuje a la derecha */
  .perm-toolbar .btn {
    flex: 0 0 auto !important;
    width: auto !important;
    padding: .45rem .9rem;
    font-size: .95rem;
    border-radius: 10px;
  }
  .perm-toolbar .btn-outline-secondary { min-width: 150px; }
  .perm-toolbar .btn-primary          { min-width: 170px; }
}

/* ===== PARCHE VISIBILIDAD Y CONTRASTE (poner AL FINAL de Roles.css) ===== */

/* 1) Que los botones SIEMPRE muestren el texto */
.btn { color: #0f172a; }                       /* color base oscuro */
.btn.btn-primary { color: #fff; background: var(--brand); border-color: var(--brand); }
.btn.btn-primary:hover { filter: brightness(.96); }
.btn.btn-outline-secondary { color:#334155; background:#fff; border-color:#cbd5e1; }
.btn.btn-outline-secondary:hover { background:#f8fafc; border-color:#94a3b8; color:#0f172a; }

/* 2) Botón "Ver deshabilitados" (era casi invisible) */
.btn-ghost-light{
  background: rgba(88,102,242,.12);   /* leve tono de la marca */
  color: #334155;                     /* texto oscuro legible */
  border: 1px solid rgba(88,102,242,.25);
}
.btn-ghost-light:hover{
  background: rgba(88,102,242,.20);
  border-color: rgba(88,102,242,.35);
}

/* 3) Evitar que algo lo ponga blanco al cambiar de rol (p.ej. Guardar cambios) */
.perm-toolbar .btn { color: inherit !important; }
.perm-toolbar .btn.btn-primary { color:#fff !important; }

/* 4) Estado deshabilitado legible */
.btn:disabled, .btn.disabled { opacity: .85 !important; }
.btn-primary:disabled{
  background-color:#4f7cff !important; border-color:#4f7cff !important; color:#fff !important;
}
.btn-outline-secondary:disabled{
  background-color:#e9ecef !important; border-color:#d1d5db !important; color:#475569 !important;
}

/* 5) Inputs y placeholders (el de "Nombre del nuevo rol...") */
input.form-control, .form-control { color:#0f172a; }
input::placeholder, .form-control::placeholder { color:#6b7280; opacity:1; }

/* 6) Evitar herencias de color blanco desde items seleccionados */
.list-group .list-group-item.selected-role .btn { color: inherit; }
.list-group .list-group-item.selected-role .btn.btn-outline-primary { color:#3f5bff !important; }
.list-group .list-group-item.selected-role .btn.btn-outline-danger  { color:#e03131 !important; }

